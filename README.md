# Bellabeat case study with Python

## Introduction

Bellabeat is high-tech manufacturer of health-focused products for women. Bellabeat offers the following products:
- Bellabeat app: The Bellabeat app provides users with health data related to their activity, sleep, stress,
menstrual cycle, and mindfulness habits. This data can help users better understand their current habits and
make healthy decisions. The Bellabeat app connects to their line of smart wellness products.
- Leaf: Bellabeat’s classic wellness tracker can be worn as a bracelet, necklace, or clip. The Leaf tracker connects
to the Bellabeat app to track activity, sleep, and stress.
- Time: This wellness watch combines the timeless look of a classic timepiece with smart technology to track user
activity, sleep, and stress. The Time watch connects to the Bellabeat app to provide you with insights into your
daily wellness.

The purpose of this analysis is to identify trends in smart device usage and apply gained insights to create recommendations for improvement of Bellabeat marketing strategy. The analysis is supposed to answer the following questions:
1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?

## Data description and limitations

For this analysis I will be using public datasets containing data on Fitbit users. These datasets were generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016.  Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. Individual reports can be parsed by export session ID (column A) or timestamp (column B).  Variation between output represents use of different types of Fitbit trackers and individual tracking behaviors / preferences. (Source -  zenodo.org)
Data is stored in .csv files in long format.

Data limitations
- The data was collected in 2016 which makes it outdated for the current analysis
- There is no information regarding the gender of participants which is a big limitation considering that Bellabeat is a product targeted solely to women
- The sample size is only 33 users which is not representative of the whole population
- Although the description says there were 30 eligible users, the datasets contain data on 33 users, which raises questions regarding the credibility of the data

For this analysis I will be using the following datasets:
-	dailyActivity_merged
-	weightLogInfo_merged
-	sleepDay_merged

## Preparing the environment

First I am going to import the necessary libraries:

```python
import pandas as pd
import numpy as np
import datetime as dt
from matplotlib import pyplot as plt
import seaborn as sns
```

## Importing datasets

Next, I am uploading the datasets chosen for analysis and converting them to data frames:

```
activity = pd.read_csv('datasets\dailyActivity_merged.csv')
weight = pd.read_csv('datasets\weightLogInfo_merged.csv')
sleep = pd.read_csv('datasets\sleepDay_merged.csv')
```

## Data cleaning

First I am going to asses the size of my datasets:

```python
print(activity.shape)
print(weight.shape)
print(sleep.shape)
```

I will continue my exploration with info()

```python
print(activity.info())
print(weight.info())
print(sleep.info())
```

We can see that there are no null values except for ‘Fat’ column in weightLogInfo_merged dataset. I will not be replacing these null values because there is not enough data available. 

Next, let’s fix the wrong data types:

```python
activity['Id'] = activity['Id'].astype(str)
activity['ActivityDate'] = pd.to_datetime(activity['ActivityDate'], format='%m/%d/%Y')
weight['Id'] = weight['Id'].astype(str)
weight['Date'] = pd.to_datetime(weight['Date'], format='mixed')
sleep['Id'] = sleep['Id'].astype(str)
sleep['SleepDay'] = pd.to_datetime(sleep['SleepDay'], format='mixed')
```

Let’s take a look at our data:

```python
print(activity.head())
print(weight.head())
print(sleep.head())
```

For convenience, I am going to round the number in WeightKg column to the second decimal place:

```python
weight[['WeightKg']] = np.round(weight[['WeightKg']],2)
```

Now I am going to check for duplicates:

```python
print(activity.duplicated().sum())
print(weight.duplicated().sum())
print(sleep.duplicated().sum())
```

There are 3 duplicates in sleepDay_merged dataset, I am going to drop them:

```python
sleep.drop_duplicates(inplace=True)
```

Preliminary data cleaning is now complete and I am going to proceed with exploratory analysis. 

## Analysis

First I am going to work with dailyActivity_merged dataset. Let’s explore the data:

```python
print(activity['Id'].nunique())
print(activity['Id'].value_counts())
print(activity['Id'].value_counts().mean())
```

We can see that there are 33 unique users who made 28 inputs each on average. 

Now let’s see some descriptive statistics:

```python
print(activity.describe())
```

What catches my attention immediately is the average of daily steps - 7638, which is less than recommended 10,000. It would be interesting to see the average of daily steps for each user, so let’s plot a bar chart.

```python
mean_total_steps = activity.groupby('Id')['TotalSteps'].mean()

plt.bar(mean_total_steps.index,mean_total_steps)
plt.xticks(rotation=90)
plt.show()
```

![avg daily steps per Id](https://github.com/user-attachments/assets/748a2a52-c18b-4ab6-b886-e6eb25668d88)

We can see that there are a few outliers with an average of less than 2,000 steps logged. But we must keep in mind that some users made fewer inputs than the others. Still, there are only few users who are averaging more than 10,000 steps daily. 

Next I would like to see if there is a correlation between the number of steps and calories burned:

```python
print(activity[['TotalSteps', 'Calories']].corr())
```

The coefficient is close to 0.6, which means there is a moderate correlation. Let’s explore some more possible correlations:

```python
print(activity[['VeryActiveDistance','SedentaryMinutes','VeryActiveMinutes', 'Calories']].corr())
```

As we can see from the table, there is a (surprisingly) weak correlation between very active distance and burned calories, no correlation between calories and sedentary minutes, and a moderate correlation between very active minutes and calories. The last one is the strongest correlation we’ve yet discovered. 

Now I would like to take a look at the weight records, which are stored in weightLogInfo_merged dataset:

```python
print(weight.head())
print(weight.info())
print(weight['Id'].nunique())
```

We can see that there are only 67 entries made by 8 unique users, which is about 4 times less than the number of users who had recorded their daily activities. Furthermore, there are only 2 inputs regarding the percentage of body fat. Both weight control and fat control are important for maintaining a healthy lifestyle, so I think the low number of these records should be taken into consideration. 

Let’s see how many of these entries are manual reports:

```python
print(weight['IsManualReport'].value_counts())
```

As we can see, there are 41 manual reports as opposed to 26 reports that presumably were recorded by the smart scales. 

And now let’s explore sleepDay_merged dataset:

```python
print(sleep.head())
print(sleep.info())
print(sleep['Id'].nunique())
```

Here we have 24 users and 412 entries in total. I would like to explore the number of hours of sleeps users were getting daily. For this purpose I am going to create a new column TotalHoursAsleep and fill it with data from TotalMinutesAsleep converted to hours:

```python
sleep['TotalHoursAsleep'] = sleep['TotalMinutesAsleep'] // 60
print(sleep.head())
```

Now let`s see some statistics:

```python
print(sleep.describe())
```

We can see that users were getting 6.4 hours of sleep on average. Although everyone`s needs are different, it is recommended to be getting at least 8 hours of sleep daily. 

Now it could be interesting to see how much time users spent in bed without sleeping:

```python
sleep['BedNoSleep'] = sleep['TotalTimeInBed'] - sleep['TotalMinutesAsleep']
print(sleep.head())
print(sleep.describe())
```

Now I would like to return to the problem of the low number of weights records. Since weight monitoring is crucial for a healthy lifestyle, it might be worthwhile to look into ways to increase the number of weight reports among users. For this purpose I am going to try and see if there are any similarities between users who had inputted their weight. 

First I am going to split the daily activity dataset into 2 groups. Group1 is going to contain inputs made by users who also made their weight inputs, and group2 is going to contain inputs made by all other users:

```python
group1 = activity[(activity['Id'].isin(weight['Id']))]
group2 = activity[~(activity['Id'].isin(weight['Id']))]
print(group1)
print(group2)
```

The first group is much smaller, containing 247 inputs by 8 users, as opposed to group 2 with 693 inputs by 25 remaining users. We should keep this difference in mind while drawing any conclusions. 

Now let’s investigate the differences between the two groups:

```python
print(group1.describe())
print(group2.describe())
```

We can see that group1 is performing better than group2 in terms of activity. A few notable parameters are the total steps (8712 on average in group1 compared to 7255 in group2), very active minutes (30.5 and 17 on average) and calories (2338 and 2291, respectively). These results may indicate that people who lead more active life are more likely to have a habit of recording their weight. 

## Results presentation

Now I would like to present my finding visually, starting with the average of daily steps.

Note: users IDs were aliased as numbers for better readability of the chart.

```python
mean_total_steps = activity.groupby('Id')['TotalSteps'].mean()
figure, ax = plt.subplots(1,1)

plt.xticks(rotation=90)
ax.set_xticklabels (range(1, 34))

plt.title('Average of daily steps', fontsize=12, fontweight='bold')
plt.xlabel('Users', fontsize=10, fontweight='bold')
plt.ylabel('Number of steps', fontsize=10, fontweight='bold' )

threshold = 8000
above_threshold = np.maximum(mean_total_steps - threshold, 0)
below_threshold = np.minimum(mean_total_steps, threshold)

ax.bar(mean_total_steps.index, below_threshold, color="r", label='Do not meet daily step recommendation')
ax.bar(mean_total_steps.index, above_threshold, color="g", label='Meet daily step recommendation', bottom=below_threshold)
ax.plot([-1., 33], [threshold, threshold], "k--")

plt.legend(fontsize=8)

plt.show()
```

![avg steps threshold](https://github.com/user-attachments/assets/5dde55b3-e9f9-40b5-9ebc-5d3618b65479)


This threshold bar chart clearly shows that most users do not meet the recommended 8000 daily steps milestone. We can also note that the data is quite widespread, which could indicate that we are dealing with users with different lifestyles. 

Next I would like to highlight the correlations I previously discovered using the correlation matrix.

```python
cond = activity[['Calories', 'TotalSteps', 'TotalDistance', 'VeryActiveDistance', 'SedentaryMinutes', 'VeryActiveMinutes']]

fig,ax = plt.subplots(figsize=(13,7))

ax = sns.heatmap(cond.corr(),
                 annot=True,
                 cmap='mako_r',
                 fmt = '.2f',
                )
plt.xticks(rotation=0)

ax.set_title("Correlation between burned calories and different activity parameters", fontsize=15, fontweight='bold', pad=15.0)
plt.show()
```


![correlmatrix](https://github.com/user-attachments/assets/6faed34e-4a24-42dc-88ed-9127c8f99f02)

From this heatmap we can observe that:

1. there is a moderate positive correlation between calories and such parameters as total distance, total steps and very active minutes;
2. there is a weak positive correlation between calories and very active distance;
3. there is no notable correlation between calories and sedentary minutes.

Now let’s take a look at distribution of the time users spent in bed:

```python
labels = ['Minutes asleep', 'In bed but not sleeping']
data = sleep[['TotalMinutesAsleep', 'BedNoSleep']].sum()

plt.figure(figsize=(6, 6))
wedges, texts, autotexts = plt.pie(data,
                                   wedgeprops={'edgecolor': 'black'},
                                   autopct='%1.1f%%',
                                   textprops={'fontsize': 10},
                                   explode=(0.05, 0))
labels_with_values = [f'{label}: {value:.1f}' for label, value in zip(labels, data)]
plt.legend(wedges, labels_with_values, title='Time spent in bed', loc="lower left", bbox_to_anchor=(1, 0, 0.5, 1))
plt.title('Time spent in bed', weight="bold", fontsize='14')
plt.show()
```

![sleep pie](https://github.com/user-attachments/assets/49efb47d-d8a9-405e-ad12-e39b6bcfebf0)


We can see that time spent in bed without sleeping constitutes only 8.6% of the total time in bed, therefore there is no basis to suggest that users have troubles falling asleep or staying in bed for too long after waking up. 

And finally, let’s take a look at the difference between the two groups of users:

- Group 1 - users who recorded their weight
- Group 2 - users who didn’t record their weight

```python
# average of daily steps

x = np.array(['Group 1', 'Group 2'])
y = np.array([group1['TotalSteps'].mean(), group2['TotalSteps'].mean()])

fig, ax = plt.subplots(figsize=(6,6))
bar_colors = ['tab:blue', 'tab:orange']
ax.bar(x, y, color=bar_colors)

plt.xlabel("Groups", fontweight='bold') 
plt.ylabel("Mean of total steps", fontweight='bold') 
plt.title("Average daily steps by group", fontweight='bold', pad=15.0) 
plt.show() 

# average of very active minutes

x = np.array(['Group 1', 'Group 2'])
y = np.array([group1['VeryActiveMinutes'].mean(), group2['VeryActiveMinutes'].mean()])

fig, ax = plt.subplots(figsize=(6,6))
bar_colors = ['tab:blue', 'tab:orange']
ax.bar(x, y, color=bar_colors)

plt.xlabel("Groups", fontweight='bold') 
plt.ylabel("Mean of very active minutes", fontweight='bold') 
plt.title("Average daily very active minutes by group", fontweight='bold', pad=15.0) 
plt.show() 

# average daily calories

x = np.array(['Group 1', 'Group 2'])
y = np.array([group1['Calories'].mean(), group2['Calories'].mean()])

fig, ax = plt.subplots(figsize=(6,6))
bar_colors = ['tab:blue', 'tab:orange']
ax.bar(x, y, color=bar_colors)

plt.xlabel("Groups", fontweight='bold') 
plt.ylabel("Mean of burned calories", fontweight='bold') 
plt.title("Average daily burned calories by group", fontweight='bold', pad=15.0) 
plt.show() 
```

![steps by group](https://github.com/user-attachments/assets/f6dce4ca-db67-4ee0-9f4e-172c8443d9a7)

![active mins by group](https://github.com/user-attachments/assets/39635200-a74a-4027-82fb-a438ced45ab2)

![calories by group](https://github.com/user-attachments/assets/ad9e5e63-52d4-4409-a09e-9e089b593e5b)


From these graphs we can observe that users who recorded their weight are more active on average and tend to burn more calories daily (although the difference in calories is not as big as the difference in total steps and very active minutes). 

## Conclusions and recommendations

As a result of this analysis, the following trends were discovered:

1. The majority of FitBit users do not meet the recommended 8000 steps per day milestone
2. Such parameters as total distance, total steps and very active minutes seem to be correlated with the number of burned calories the most
3. The average FitBit user does not get the recommended 8 hours of sleep daily, but there are no indications that users tend to have problems falling asleep or getting up in the morning
4. The majority of users do not record their weight, and the group who does record it shows better performance in terms of activity and burned calories
5. There is significantly more manual weight records than automatic

 Based on these findings, I have developed the following recommendations:

1. As for now, Bellabeat products do not deal with weight records, but as we discovered, weight control is crucial for maintaining a healthy lifestyle, so it might be worth to look into developing solutions for weight monitoring. Providing integrations with the most popular smart scales models can make the process of monitoring easy for users and encourage them to do it regularly.
2. Encouraging users to live a more active lives - get more daily steps, exercising more - could be the backbone of Bellabeat marketing strategy.
3. Highlighting the correlation between daily steps, daily activities and burned calories could encourage more people to purchase Bellabeat products to aid them in monitoring their activity levels.

Suggestions for additional research:

1. Bellabeat products help track stress levels as well, but the current analysis did not cover this topic. It might be worthwhile to find additional data and look into correlations between stress and sleep, stress and activity etc.
2. The data used for the current analysis did not specify the gender of the users. Obtaining data from the female part of the population and analyzing it might help to better tailor Bellabeat’s marketing strategy to female needs.
